/* @hrimthurs/tackle 1.12.2 https://github.com/hrimthurs/Tackle @license MIT */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Tackle={})}(this,(function(e){"use strict";function t(e,t=!1){let n=Array.isArray(e)?[...e]:null!=e?[e]:[];return t?r(n):n}function r(e,t=!1){let r=[...new Set(e)];return t&&(e=r),r}var n={getArray:t,getUniqValues:r,excludeValues:function(e,r,n=!1){let o=t(r),a=e.filter((e=>!o.includes(e)));return n&&(e=a),a},sortArrayStr:function(e,t=!1){let r=e.sort(((e,t)=>e.localeCompare(t)));return t&&(e=r),r},isSubArray:function(e,t,r=!1){return(r?e.length==t.length:e.length<=t.length)&&e.every((e=>t.includes(e)))}};function o(e,t=0){const r={f1:3735928559,f2:2654435761,f3:2246822507},n={f1:1103547991,f2:1597334677,f3:3266489909};let o=r.f1^t,a=n.f1^t;for(let t=0;t<e.length;t++){let i=e.charCodeAt(t);o=Math.imul(o^i,r.f2),a=Math.imul(a^i,n.f2)}o=Math.imul(o^o>>>16,r.f3)^Math.imul(a^a>>>13,n.f3),a=Math.imul(a^a>>>16,r.f3)^Math.imul(o^o>>>13,n.f3);let i=(a>>>0).toString(16)+(o>>>0).toString(16);return"0".repeat(16-i.length)+i}var a={formatNumber:function(e,t,r=0){const n=Math.abs(e),o=e<0?"-":"",a=r?n.toFixed(r):n.toString();let i=t-a.length-o.length;return o+(i<=0?a:Number.isInteger(e)&&!r?"0".repeat(i)+a:a+"0".repeat(i))},getHash:o};function i(e,t=null){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&(!t||t in e)}function s(e,r,n=!1){let o=n?e:f(e);return t(r).forEach((e=>l(o,e,null,{cbAction:(e,t)=>delete e[t]}))),o}function c(e,...t){let r=t.map((e=>e.split("."))),n=r.map((t=>t.reduce(((e,t)=>i(e,t)?e[t]:void 0),e)));return 1==r.length?n[0]:n}function l(e,t,r,n={}){let o=!1;const a=n.onlyExist??!0,s=n.cbAction??(()=>{});let l=t.split(".");if(l.length>1)if(a){const t=l.pop();let n=c(e,l.join("."));i(n,t)&&(n[t]=r,o=s(n,t)??!0)}else{let t=e;l.forEach(((e,n)=>{e in t||(n<l.length-1?(t[e]={},t=t[e]):t[e]=r)}))}else a&&!(t in e)||(e[t]=r,o=s(e,t)??!0);return o}function u(e,t,r=!1,n=!1){return y(e,t,r,n)}function f(e){return JSON.parse(JSON.stringify(e))}function h(e){const t=Object.keys(e);if(t.length>0&&t.every((e=>!Number.isNaN(Number(e))))){let r=[];return t.forEach((t=>r[t]=e[t])),r}return e}var d={isObjectJs:i,excludeKeys:s,getValue:c,setValue:l,setProperties:function(e,t,r=!0){u(t,((t,n,o)=>{const a=Array.isArray(t);if(a||null===t||"object"!=typeof t){const i=""!==o?o+"."+n:n,s=c(e,i);(!r||typeof s==typeof t&&Array.isArray(s)===a)&&l(e,i,t)}}),!0)},traverse:u,merge:function e(...t){return t.reduce(((t,r)=>t=i(r)&&i(t)&&Object.keys(t).length>0?Object.keys(r).reduce(((n,o)=>null!=r[o]?(n[o]=e(t[o],r[o]),n):n),{...t}):null==r?t:r),{})},clone:f,tryConvertToArray:h,getArrayTransferable:function(e){const t=["ArrayBuffer","MessagePort","ReadableStream","WritableStream","TransformStream","ImageBitmap","AudioData","VideoFrame","OffscreenCanvas","RTCDataChannel"];let r=[];return u(e,(e=>{t.some((t=>e.constructor.name===t))&&r.push(e)}),!0,!0),r},getHash:function(e,t=null,r=0){return o(JSON.stringify(s(e,t)),r)}};function y(e,t,r,n,o=[]){const a="__TackleEnumAlreadyProcessed__",s=Object.keys(e);return Object.fromEntries(s.map((s=>{let c=e[s],l=t(c,s,o.join("."))??c;if(n&&Array.isArray(c)||r&&i(c)){if(!c[a]){Object.defineProperty(c,a,{value:!0,writable:!1,configurable:!0});let e=y(c,t,r,n,o.concat(s));l=Array.isArray(c)?h(e):e}delete c[a]}return[s,l]})))}var m={decoMemoize:function(e,t=globalThis){let r=new Map;return function(){let n,o=[].join.call(arguments);return r.has(o)?n=r.get(o):(n=e.apply(t,arguments),r.set(o,n)),n}}};function p(e,t,r=!1){let n=A(e,{number:e=>Number(e.toFixed(t))});return r?n:JSON.parse(n)}var g={bytesToKb:function(e,t=2){return p(e/1024,t)},bytesToMb:function(e,t=2){return p(e/1048576,t)},trimFloat:p,getParamsURL:function(e=null,t={}){const r={keysLowerCase:!1,valsLowerCase:!1,...t};let n={},o=e instanceof URL?e:j(e);if(o)for(const e of o.searchParams.keys()){let t=o.searchParams.get(e).replace(/^["'](.*)["']$/,"$1"),a=w(r.valsLowerCase?t.toLowerCase():t),i=a.reduce(((e,t)=>{if("string"==typeof t){let r=t.split(":"),[n,...o]=r,a=o.length>1?o.join(":"):o[0];void 0!==a&&(e[n]=T(a))}return e}),{}),s=Object.keys(i).length!=a.length?a.length>1?a:a[0]:i;n[r.keysLowerCase?e.toLowerCase():e]=s}return n},setParamsURL:function(e,t={},r=!1){let n="string"==typeof e?j(e):e;if(n)for(const e in t){let o=t[e];if("object"==typeof o){let e=Array.isArray(o)?o.map((e=>A(e,{string:e=>e}))):Object.entries(o).map((e=>`${e[0]}:${A(e[1],{string:e=>e})}`));o=e.join(",")}n.searchParams.set(e,r?encodeURIComponent(o):o)}return n},generateHashUID:function(e=""){const t=10+Math.trunc(10*Math.random()),r=new Array(t).fill(0).map((()=>Math.random())).join();return o(e+Date.now()+r,Math.random())},generateUUID:function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(b[255&e]+b[e>>8&255]+b[e>>16&255]+b[e>>24&255]+"-"+b[255&t]+b[t>>8&255]+"-"+b[t>>16&15|64]+b[t>>24&255]+"-"+b[63&r|128]+b[r>>8&255]+"-"+b[r>>16&255]+b[r>>24&255]+b[255&n]+b[n>>8&255]+b[n>>16&255]+b[n>>24&255]).toLowerCase()},promiseTimeout:function(e,t={}){return new Promise((async(r,n)=>{const o=setTimeout((()=>{t.timeoutReject?n(new Error("timeout")):r()}),e);if(t?.cbCreate(r,o),t.func)try{r(await t.func(...t.args??[]))}catch(e){n(e)}finally{clearTimeout(o)}}))}};const b=new Array(256).fill(0).map(((e,t)=>(t<16?"0":"")+t.toString(16)));function w(e){let t=[],r=[],n=0,o=0,a=e.split(",");for(const e of a)if(n>0||"{"==e[0]){r.push(e);let a=e.split("");n=a.reduce(((e,t)=>"{"==t?++e:"}"==t?--e:e),n),o=a.reduce(((e,t)=>['"',"'"].includes(t)?++e:e),o),0==n&&"}"==e[e.length-1]&&(t.push(r.join(",")),r=[])}else t.push(e);return 0==n&&o%2==0?t.concat(r).map((e=>""===e||T(e))):[e]}function A(e,t={},r=!0){let n=t[typeof e];return n?n(e):r?JSON.stringify(e,((e,r)=>A(r,t,!1))):e}function j(e){try{return new URL(decodeURIComponent(e||self.location.href))}catch{}}function T(e){try{return JSON.parse(e.replace(/^["'](.*)["']$/,"$1"))}catch{return e}}function v(e,t,r={}){const n=document.createElement(e),o=r.insertFirst??!1,a=r.subElements??[];return Object.entries(r).forEach((e=>{const[t,r]=e,o=Array.isArray(r),a="string"==typeof r,i="object"==typeof r;switch(t){case"attributes":i&&Object.entries(r).forEach((e=>{n.setAttribute(e[0],e[1])}));break;case"style":const e=n.style.cssText??"";i?Object.entries(r).forEach((t=>{n.style.cssText=e+`;${t[0]}:${t[1]}`})):a&&(n.style.cssText=e+`;${r}`);break;case"class":o?r.forEach((e=>n.classList.add(e))):a&&n.classList.add(r);break;case"properties":i&&Object.entries(r).forEach((e=>{e[0]in n&&(n[e[0]]=e[1])}))}})),o?t.insertBefore(n,t.firstChild):t.appendChild(n),a.forEach((e=>{const t=e.tagName;delete e.tagName,v(t,n,e)})),n}function k(e){const{width:t,height:r}=getComputedStyle(e);return{width:parseInt(t,10)+1,height:parseInt(r,10)+1}}var E={createHTMLElement:v,getSizeHTMLElement:k,setDivResizer:function(e,t){const r=v("iframe",e,{style:"position:absolute; left:0px; top:0px; width:100%; height:100%; z-index:-10000",attributes:{frameborder:"no"}}),n=r.contentWindow;let o={width:null,height:null};n.addEventListener("resize",(()=>{const e=k(r);o.width===e.width&&o.height===e.height||(t(e),o=e)})),n.dispatchEvent(new Event("resize"))},interceptErrors:function(e,t=!0){window.addEventListener("error",(r=>{t&&r.preventDefault(),e(r.message)})),window.addEventListener("unhandledrejection",(r=>{t&&r.preventDefault(),e(r.reason??"Unknown reason rejection")}))}},O={TkArray:n,TkString:a,TkObject:d,TkFunction:m,TkService:g,TkBrowser:E};e.TkArray=n,e.TkBrowser=E,e.TkFunction=m,e.TkObject=d,e.TkService=g,e.TkString=a,e.default=O,Object.defineProperty(e,"__esModule",{value:!0})}));
