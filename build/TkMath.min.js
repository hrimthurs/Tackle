/* @hrimthurs/tackle 1.26.0 https://github.com/hrimthurs/Tackle @license MIT */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).TkMath={})}(this,(function(t){"use strict";const n=Math.PI/2,e=Math.PI/4,r=2*Math.PI,o=Math.PI/180,i=180/Math.PI;function s(t,n){return t.x*n.x+t.y*n.y}function u(t,n){return t.x*n.y-t.y*n.x}function c(t,n){return{x:t.x-n.x,y:t.y-n.y}}function a(t){const{x:n,y:e}=t,r=1/(Math.sqrt(n*n+e*e)||1);return{x:n*r,y:e*r}}function f(t,n,e=.1){const r=c(n,t);return Math.abs(r.x)<e&&Math.abs(r.y)<e}function y(t,n){const e=c(n,t);return Math.sqrt(e.x**2+e.y**2)}function l(t,n){const e=c(n,t);return Math.abs(e.x)+Math.abs(e.y)}function x(t,n,e){return l(e,t)<l(e,n)}function h(t,n,e,r=1.2){let o=!1;const i=c(n,t),s=i.x**2+i.y**2;if(0!==s){const u=((e.x-t.x)*i.x+(e.y-t.y)*i.y)/s;if(u<0)o=Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)<=r;else if(u>1)o=Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2)<=r;else{const n=((t.y-e.y)*i.x-(t.x-e.x)*i.y)/s;o=Math.abs(n)*Math.sqrt(s)<=r}}return o}function g(t,n){let e=!1;for(let r=0,o=n.length-1;r<n.length;o=r++){const i=n[r],s=n[o];i.y>t.y!=s.y>t.y&&t.x<(s.x-i.x)*(t.y-i.y)/(s.y-i.y)+i.x&&(e=!e)}return e}function d(t,n,e,r){let o=null;if(t&&n&&e&&r){const i=c(t,n),s=c(r,e),a=u(i,s);if(0!==a){const t=c(r,n);o={Ua:u(t,s)/a,Ub:u(i,t)/a}}}return o}function D(t){return t&&t.Ua>=0&&t.Ua<=1&&t.Ub>=0&&t.Ub<=1}function P(t,n,e){return{x:n.x*t.Ua+e.x*(1-t.Ua),y:n.y*t.Ua+e.y*(1-t.Ua)}}function M(t,n,e,r=(t=>{})){let o=!0;const[i,s]=t,[u,c]=n;return f(c,i,e)||f(u,i,e)?r(!0):f(u,s,e)||f(c,s,e)?r(!1):o=!1,o}function m(t,n){return{first:t[n[0]],last:t[n[n.length-1]]}}var b={HALF_PI:n,QUART_PI:e,DOUBLE_PI:r,angleDegToRad:function(t=0){return Number(t)*o},angleRadToDeg:function(t=0){return Number(t)*i},roundFloat:function(t,n=3){return Number(t.toFixed(n))},dotProduct2D:s,crossProduct2D:u,delta2D:c,midPoint2D:function(t,n){return{x:(t.x+n.x)/2,y:(t.y+n.y)/2}},normalize2D:a,angleClockwise2D:function(t,n,e){const o=a(c(t,n)),i=a(c(e,n));let f=Math.acos(s(o,i));return u(o,i)<0&&(f*=-1),f<0&&(f+=r),f},isEqualCoords2D:f,dist2D:y,distManhattan2D:l,isNearerFirstPt2D:x,areaPolygon2D:function(t,n=!1){const e=t.reduce(((n,e,r)=>n+u(e,t[(r+1)%t.length])),0);return n?e:Math.abs(e)},centroidPolygon2D:function(t){let n=0;const e=t.reduce(((e,r,o)=>{const i=t[(o+1)%t.length],s=u(r,i);return n+=s,{x:e.x+(r.x+i.x)*s,y:e.y+(r.y+i.y)*s}}),{x:0,y:0}),r=3*n;return{x:e.x/r,y:e.y/r}},pointOnLineByLen2D:function(t,n,e){const r=c(n,t),o=e/(y(t,n)||1);return{x:t.x+r.x*o,y:t.y+r.y*o}},projectPointToStraightLine2D:function(t,n,e){const r=c(n,t),o=s(c(e,t),r)/s(r,r);return{x:t.x+r.x*o,y:t.y+r.y*o}},sidePointRelativeStraightLine2D:function(t,n,e){const r=u(c(n,t),c(e,t));return Math.sign(r)},isPointBelongStraightLine2D:function(t,n,e,r=1.2){const o=c(n,t),i=u(o,c(e,t)),s=Math.sqrt(o.x**2+o.y**2);return Math.abs(i/s)<=r/2},isPointBelongLineSegment2D:h,isSomePointBelongLineSegment2D:function(t,n,e,r=1.2){return e.some((e=>h(t,n,e,r)))},isEveryPointBelongLineSegment2D:function(t,n,e,r=1.2){return e.every((e=>h(t,n,e,r)))},isPointInsidePolygon2D:g,isSomePointInsidePolygon2D:function(t,n){return t.some((t=>g(t,n)))},isEveryPointInsidePolygon2D:function(t,n){return t.every((t=>g(t,n)))},isParallelStraightLines2D:function(t,e,r,o,i=.1){const s=u(a(c(e,t)),a(c(o,r)));return Math.abs(s)<=Math.sin(n*i)},crossStraightLines2D:function(t,n,e,r){const o=d(t,n,e,r);if(o)return P(o,t,n)},crossLinesSegments2D:function(t,n,e,r){const o=d(t,n,e,r);if(D(o))return P(o,t,n)},isCrossLinesSegments2D:function(t,n,e,r){return!0===D(d(t,n,e,r))},chainsLinesSegments2D:function(t,n=!1,e=.1){let r=[];return t.forEach(((n,o)=>{r.some((r=>r.some(((i,s)=>M(n,t[i],e,(t=>{r.splice(s+(t?0:1),0,o)}))))))||r.push([o])})),r.length>1&&(r=function(t,n,e){const r=t.filter(((r,o)=>{let i=!1;const s=m(n,r);for(let u=o+1;u<t.length;u++){const o=t[u],c=m(n,o);if(i=M(s.first,c.last,e,(()=>o.push(...r)))||M(s.last,c.first,e,(()=>o.unshift(...r)))||M(s.last,c.last,e,(()=>o.push(...r.reverse())))||M(s.first,c.first,e,(()=>o.unshift(...r.reverse()))),i)break}return!i}));return r}(r,t,e)),r.map((r=>{n&&r.forEach(((n,e)=>{const o=e<r.length-1?r[e+1]:r[0],[i,s]=t[o],[u]=t[n];x(s,i,u)&&(t[o][0]=s,t[o][1]=i)}));const{first:o,last:i}=m(t,r),s=r.length>2&&M(o,i,e);return{inds:r,closed:s}}))}};t.default=b,Object.defineProperty(t,"__esModule",{value:!0})}));
