/* @hrimthurs/tackle 1.31.2 https://github.com/hrimthurs/Tackle @license MIT */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).TkMath={})}(this,(function(n){"use strict";const t=Math.PI/2,e=Math.PI/4,o=2*Math.PI,i=Math.PI/180,r=180/Math.PI;function s(n=0){return Number(n)*i}function a(n=0){return Number(n)*r}function u(n,t=3){return Number(n.toFixed(t))}function c(n,t){return n.x*t.x+n.y*t.y}function l(n,t){return n.x*t.y-n.y*t.x}function y(n,t){return{x:n.x-t.x,y:n.y-t.y}}function f(n,t){return{x:(n.x+t.x)/2,y:(n.y+t.y)/2}}function g(n){const{x:t,y:e}=n,o=1/(Math.sqrt(t*t+e*e)||1);return{x:t*o,y:e*o}}function D(n,t){return g({x:n.y-t.y,y:t.x-n.x})}function h(n,t,e,i=!1){const r=g(y(n,t)),s=g(y(e,t));let a=Math.acos(c(r,s));return l(r,s)<0&&(a*=-1),!i&&a<0&&(a+=o),a}function x(n,t,e=.1){const o=y(t,n);return Math.abs(o.x)<e&&Math.abs(o.y)<e}function d(n,t,e=.1){return t.some((t=>x(n,t,e)))}function P(n,t,e,o,i=.1){return x(n,e,i)&&x(t,o,i)||x(t,e,i)&&x(n,o,i)}function m(n,t){const e=y(t,n);return Math.sqrt(e.x**2+e.y**2)}function L(n,t){const e=y(t,n);return Math.abs(e.x)+Math.abs(e.y)}function S(n,t,e){return L(e,n)<L(e,t)}function M(n,t,e,o=!1){const i=((t.x-n.x)*(e.y-n.y)-(e.x-n.x)*(t.y-n.y))/2;return o?i:Math.abs(i)}function b(n,t=!1){let e=0;if(n.length>3){const o=n.reduce(((t,e,o)=>t+l(e,n[(o+1)%n.length])),0)/2;e=t?o:Math.abs(o)}else 3===n.length&&(e=M(n[0],n[1],n[2],t));return e}function p(n){let t=0;const e=n.reduce(((e,o,i)=>{const r=n[(i+1)%n.length],s=l(o,r);return t+=s,{x:e.x+(o.x+r.x)*s,y:e.y+(o.y+r.y)*s}}),{x:0,y:0}),o=3*t;return{x:e.x/o,y:e.y/o}}function I(n,t,e){const o=y(t,n),i=e/(m(n,t)||1);return{x:n.x+o.x*i,y:n.y+o.y*i}}function E(n,t,e){const o=y(t,n),i=c(y(e,n),o)/c(o,o);return{x:n.x+o.x*i,y:n.y+o.y*i}}function q(n,t,e){const o=l(y(t,n),y(e,n));return Math.sign(o)}function v(n,t,e,o=1.2){const i=y(t,n),r=l(i,y(e,n)),s=Math.sqrt(i.x**2+i.y**2);return Math.abs(r/s)<=o/2}function T(n,t,e,o=1.2){let i=!1;const r=y(t,n),s=r.x**2+r.y**2;if(0!==s){const a=((e.x-n.x)*r.x+(e.y-n.y)*r.y)/s;if(a<0)i=Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2)<=o;else if(a>1)i=Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)<=o;else{const t=((n.y-e.y)*r.x-(n.x-e.x)*r.y)/s;i=Math.abs(t)*Math.sqrt(s)<=o}}return i}function U(n,t,e,o=1.2){return e.some((e=>T(n,t,e,o)))}function B(n,t,e,o=1.2){return e.every((e=>T(n,t,e,o)))}function C(n,t){let e=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const r=t[o],s=t[i];r.y>n.y!=s.y>n.y&&n.x<(s.x-r.x)*(n.y-r.y)/(s.y-r.y)+r.x&&(e=!e)}return e}function R(n,t){return n.some((n=>C(n,t)))}function F(n,t){return n.every((n=>C(n,t)))}function N(n,e,o,i,r=.1){const s=l(g(y(e,n)),g(y(i,o)));return Math.abs(s)<=Math.sin(t*r)}function _(n,t,e,o){const i=O(n,t,e,o);if(i)return z(i,n,t)}function j(n,t,e,o){const i=O(n,t,e,o);if(w(i))return z(i,n,t)}function k(n,t,e,o){return!0===w(O(n,t,e,o))}function O(n,t,e,o){let i=null;if(n&&t&&e&&o){const r=y(n,t),s=y(o,e),a=l(r,s);if(0!==a){const n=y(o,t);i={Ua:l(n,s)/a,Ub:l(r,n)/a}}}return i}function w(n){return n&&n.Ua>=0&&n.Ua<=1&&n.Ub>=0&&n.Ub<=1}function z(n,t,e){return{x:t.x*n.Ua+e.x*(1-n.Ua),y:t.y*n.Ua+e.y*(1-n.Ua)}}function A(n,t=!1,e=.1){let o=[];return n.forEach(((t,i)=>{o.some((o=>o.some(((r,s)=>H(t,n[r],e,(n=>{o.splice(s+(n?0:1),0,i)}))))))||o.push([i])})),o.length>1&&(o=function(n,t,e){const o=n.filter(((o,i)=>{let r=!1;const s=Q(t,o);for(let a=i+1;a<n.length;a++){const i=n[a],u=Q(t,i);if(r=H(s.first,u.last,e,(()=>i.push(...o)))||H(s.last,u.first,e,(()=>i.unshift(...o)))||H(s.last,u.last,e,(()=>i.push(...o.reverse())))||H(s.first,u.first,e,(()=>i.unshift(...o.reverse()))),r)break}return!r}));return o}(o,n,e)),o.map((o=>{t&&o.forEach(((t,e)=>{const i=e<o.length-1?o[e+1]:o[0],[r,s]=n[i],[a]=n[t];S(s,r,a)&&(n[i][0]=s,n[i][1]=r)}));const{first:i,last:r}=Q(n,o),s=o.length>2&&H(i,r,e);return{inds:o,closed:s}}))}function H(n,t,e,o=(n=>{})){let i=!0;const[r,s]=n;return d(r,t,e)?o(!0):d(s,t,e)?o(!1):i=!1,i}function Q(n,t){return{first:n[t[0]],last:n[t[t.length-1]]}}var G={HALF_PI:t,QUART_PI:e,DOUBLE_PI:o,angleDegToRad:s,angleRadToDeg:a,roundFloat:u,dotProduct2D:c,crossProduct2D:l,delta2D:y,midPoint2D:f,normalize2D:g,normal2D:D,angleClockwise2D:h,isEqualCoords2D:x,isSomeEqualCoords2D:d,isEqualLinesSegments2D:P,dist2D:m,distManhattan2D:L,isNearerFirstPt2D:S,areaTriangle2D:M,areaPolygon2D:b,centroidPolygon2D:p,pointOnLineByLen2D:I,projectPointToStraightLine2D:E,sidePointRelativeStraightLine2D:q,isPointBelongStraightLine2D:v,isPointBelongLineSegment2D:T,isSomePointBelongLineSegment2D:U,isEveryPointBelongLineSegment2D:B,isPointInsidePolygon2D:C,isSomePointInsidePolygon2D:R,isEveryPointInsidePolygon2D:F,isParallelStraightLines2D:N,crossStraightLines2D:_,crossLinesSegments2D:j,isCrossLinesSegments2D:k,chainsLinesSegments2D:A};n.angleClockwise2D=h,n.angleDegToRad=s,n.angleRadToDeg=a,n.areaPolygon2D=b,n.areaTriangle2D=M,n.centroidPolygon2D=p,n.chainsLinesSegments2D=A,n.crossLinesSegments2D=j,n.crossProduct2D=l,n.crossStraightLines2D=_,n.default=G,n.delta2D=y,n.dist2D=m,n.distManhattan2D=L,n.dotProduct2D=c,n.isCrossLinesSegments2D=k,n.isEqualCoords2D=x,n.isEqualLinesSegments2D=P,n.isEveryPointBelongLineSegment2D=B,n.isEveryPointInsidePolygon2D=F,n.isNearerFirstPt2D=S,n.isParallelStraightLines2D=N,n.isPointBelongLineSegment2D=T,n.isPointBelongStraightLine2D=v,n.isPointInsidePolygon2D=C,n.isSomeEqualCoords2D=d,n.isSomePointBelongLineSegment2D=U,n.isSomePointInsidePolygon2D=R,n.midPoint2D=f,n.normal2D=D,n.normalize2D=g,n.pointOnLineByLen2D=I,n.projectPointToStraightLine2D=E,n.roundFloat=u,n.sidePointRelativeStraightLine2D=q,Object.defineProperty(n,"__esModule",{value:!0})}));
