/* @hrimthurs/tackle 1.30.0 https://github.com/hrimthurs/Tackle @license MIT */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).TkMath={})}(this,(function(n){"use strict";const t=Math.PI/2,e=Math.PI/4,r=2*Math.PI,o=Math.PI/180,i=180/Math.PI;function s(n,t){return n.x*t.x+n.y*t.y}function u(n,t){return n.x*t.y-n.y*t.x}function c(n,t){return{x:n.x-t.x,y:n.y-t.y}}function a(n){const{x:t,y:e}=n,r=1/(Math.sqrt(t*t+e*e)||1);return{x:t*r,y:e*r}}function f(n,t,e=.1){const r=c(t,n);return Math.abs(r.x)<e&&Math.abs(r.y)<e}function y(n,t,e=.1){return t.some((t=>f(n,t,e)))}function l(n,t){const e=c(t,n);return Math.sqrt(e.x**2+e.y**2)}function x(n,t){const e=c(t,n);return Math.abs(e.x)+Math.abs(e.y)}function h(n,t,e){return x(e,n)<x(e,t)}function g(n,t,e,r=!1){const o=((t.x-n.x)*(e.y-n.y)-(e.x-n.x)*(t.y-n.y))/2;return r?o:Math.abs(o)}function d(n,t,e,r=1.2){let o=!1;const i=c(t,n),s=i.x**2+i.y**2;if(0!==s){const u=((e.x-n.x)*i.x+(e.y-n.y)*i.y)/s;if(u<0)o=Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2)<=r;else if(u>1)o=Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)<=r;else{const t=((n.y-e.y)*i.x-(n.x-e.x)*i.y)/s;o=Math.abs(t)*Math.sqrt(s)<=r}}return o}function D(n,t){let e=!1;for(let r=0,o=t.length-1;r<t.length;o=r++){const i=t[r],s=t[o];i.y>n.y!=s.y>n.y&&n.x<(s.x-i.x)*(n.y-i.y)/(s.y-i.y)+i.x&&(e=!e)}return e}function P(n,t,e,r){let o=null;if(n&&t&&e&&r){const i=c(n,t),s=c(r,e),a=u(i,s);if(0!==a){const n=c(r,t);o={Ua:u(n,s)/a,Ub:u(i,n)/a}}}return o}function M(n){return n&&n.Ua>=0&&n.Ua<=1&&n.Ub>=0&&n.Ub<=1}function m(n,t,e){return{x:t.x*n.Ua+e.x*(1-n.Ua),y:t.y*n.Ua+e.y*(1-n.Ua)}}function b(n,t,e,r=(n=>{})){let o=!0;const[i,s]=n;return y(i,t,e)?r(!0):y(s,t,e)?r(!1):o=!1,o}function L(n,t){return{first:n[t[0]],last:n[t[t.length-1]]}}var p={HALF_PI:t,QUART_PI:e,DOUBLE_PI:r,angleDegToRad:function(n=0){return Number(n)*o},angleRadToDeg:function(n=0){return Number(n)*i},roundFloat:function(n,t=3){return Number(n.toFixed(t))},dotProduct2D:s,crossProduct2D:u,delta2D:c,midPoint2D:function(n,t){return{x:(n.x+t.x)/2,y:(n.y+t.y)/2}},normalize2D:a,normal2D:function(n,t){return a({x:n.y-t.y,y:t.x-n.x})},angleClockwise2D:function(n,t,e,o=!1){const i=a(c(n,t)),f=a(c(e,t));let y=Math.acos(s(i,f));return u(i,f)<0&&(y*=-1),!o&&y<0&&(y+=r),y},isEqualCoords2D:f,isSomeEqualCoords2D:y,isEqualLinesSegments2D:function(n,t,e,r,o=.1){return f(n,e,o)&&f(t,r,o)||f(t,e,o)&&f(n,r,o)},dist2D:l,distManhattan2D:x,isNearerFirstPt2D:h,areaTriangle2D:g,areaPolygon2D:function(n,t=!1){let e=0;if(n.length>3){const r=n.reduce(((t,e,r)=>t+u(e,n[(r+1)%n.length])),0)/2;e=t?r:Math.abs(r)}else 3===n.length&&(e=g(n[0],n[1],n[2],t));return e},centroidPolygon2D:function(n){let t=0;const e=n.reduce(((e,r,o)=>{const i=n[(o+1)%n.length],s=u(r,i);return t+=s,{x:e.x+(r.x+i.x)*s,y:e.y+(r.y+i.y)*s}}),{x:0,y:0}),r=3*t;return{x:e.x/r,y:e.y/r}},pointOnLineByLen2D:function(n,t,e){const r=c(t,n),o=e/(l(n,t)||1);return{x:n.x+r.x*o,y:n.y+r.y*o}},projectPointToStraightLine2D:function(n,t,e){const r=c(t,n),o=s(c(e,n),r)/s(r,r);return{x:n.x+r.x*o,y:n.y+r.y*o}},sidePointRelativeStraightLine2D:function(n,t,e){const r=u(c(t,n),c(e,n));return Math.sign(r)},isPointBelongStraightLine2D:function(n,t,e,r=1.2){const o=c(t,n),i=u(o,c(e,n)),s=Math.sqrt(o.x**2+o.y**2);return Math.abs(i/s)<=r/2},isPointBelongLineSegment2D:d,isSomePointBelongLineSegment2D:function(n,t,e,r=1.2){return e.some((e=>d(n,t,e,r)))},isEveryPointBelongLineSegment2D:function(n,t,e,r=1.2){return e.every((e=>d(n,t,e,r)))},isPointInsidePolygon2D:D,isSomePointInsidePolygon2D:function(n,t){return n.some((n=>D(n,t)))},isEveryPointInsidePolygon2D:function(n,t){return n.every((n=>D(n,t)))},isParallelStraightLines2D:function(n,e,r,o,i=.1){const s=u(a(c(e,n)),a(c(o,r)));return Math.abs(s)<=Math.sin(t*i)},crossStraightLines2D:function(n,t,e,r){const o=P(n,t,e,r);if(o)return m(o,n,t)},crossLinesSegments2D:function(n,t,e,r){const o=P(n,t,e,r);if(M(o))return m(o,n,t)},isCrossLinesSegments2D:function(n,t,e,r){return!0===M(P(n,t,e,r))},chainsLinesSegments2D:function(n,t=!1,e=.1){let r=[];return n.forEach(((t,o)=>{r.some((r=>r.some(((i,s)=>b(t,n[i],e,(n=>{r.splice(s+(n?0:1),0,o)}))))))||r.push([o])})),r.length>1&&(r=function(n,t,e){const r=n.filter(((r,o)=>{let i=!1;const s=L(t,r);for(let u=o+1;u<n.length;u++){const o=n[u],c=L(t,o);if(i=b(s.first,c.last,e,(()=>o.push(...r)))||b(s.last,c.first,e,(()=>o.unshift(...r)))||b(s.last,c.last,e,(()=>o.push(...r.reverse())))||b(s.first,c.first,e,(()=>o.unshift(...r.reverse()))),i)break}return!i}));return r}(r,n,e)),r.map((r=>{t&&r.forEach(((t,e)=>{const o=e<r.length-1?r[e+1]:r[0],[i,s]=n[o],[u]=n[t];h(s,i,u)&&(n[o][0]=s,n[o][1]=i)}));const{first:o,last:i}=L(n,r),s=r.length>2&&b(o,i,e);return{inds:r,closed:s}}))}};n.default=p,Object.defineProperty(n,"__esModule",{value:!0})}));
