/* @hrimthurs/tackle 1.31.3 https://github.com/hrimthurs/Tackle @license MIT */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).TkMath={})}(this,(function(n){"use strict";const t=Math.PI/2,e=Math.PI/4,o=2*Math.PI,i=Math.PI/180,r=180/Math.PI;function s(n=0){return Number(n)*i}function u(n=0){return Number(n)*r}function a(n,t=3){return Number(n.toFixed(t))}function c(n,t,e){return n*(1-e)+t*e}function l(n,t){return n.x*t.x+n.y*t.y}function y(n,t){return n.x*t.y-n.y*t.x}function f(n,t){return{x:n.x-t.x,y:n.y-t.y}}function g(n,t){return{x:(n.x+t.x)/2,y:(n.y+t.y)/2}}function D(n){const{x:t,y:e}=n,o=1/(Math.sqrt(t*t+e*e)||1);return{x:t*o,y:e*o}}function h(n,t){return D({x:n.y-t.y,y:t.x-n.x})}function x(n,t,e,i=!1){const r=D(f(n,t)),s=D(f(e,t));let u=Math.acos(l(r,s));return y(r,s)<0&&(u*=-1),!i&&u<0&&(u+=o),u}function d(n,t,e=.1){const o=f(t,n);return Math.abs(o.x)<e&&Math.abs(o.y)<e}function P(n,t,e=.1){return t.some((t=>d(n,t,e)))}function m(n,t,e,o,i=.1){return d(n,e,i)&&d(t,o,i)||d(t,e,i)&&d(n,o,i)}function L(n,t){const e=f(t,n);return Math.sqrt(e.x**2+e.y**2)}function S(n,t){const e=f(t,n);return Math.abs(e.x)+Math.abs(e.y)}function M(n,t,e){return S(e,n)<S(e,t)}function b(n,t,e,o=!1){const i=((t.x-n.x)*(e.y-n.y)-(e.x-n.x)*(t.y-n.y))/2;return o?i:Math.abs(i)}function p(n,t=!1){let e=0;if(n.length>3){const o=n.reduce(((t,e,o)=>t+y(e,n[(o+1)%n.length])),0)/2;e=t?o:Math.abs(o)}else 3===n.length&&(e=b(n[0],n[1],n[2],t));return e}function I(n){let t=0;const e=n.reduce(((e,o,i)=>{const r=n[(i+1)%n.length],s=y(o,r);return t+=s,{x:e.x+(o.x+r.x)*s,y:e.y+(o.y+r.y)*s}}),{x:0,y:0}),o=3*t;return{x:e.x/o,y:e.y/o}}function E(n,t,e){const o=f(t,n),i=e/(L(n,t)||1);return{x:n.x+o.x*i,y:n.y+o.y*i}}function q(n,t,e){const o=f(t,n),i=l(f(e,n),o)/l(o,o);return{x:n.x+o.x*i,y:n.y+o.y*i}}function v(n,t,e){const o=y(f(t,n),f(e,n));return Math.sign(o)}function T(n,t,e,o=1.2){const i=f(t,n),r=y(i,f(e,n)),s=Math.sqrt(i.x**2+i.y**2);return Math.abs(r/s)<=o/2}function U(n,t,e,o=1.2){let i=!1;const r=f(t,n),s=r.x**2+r.y**2;if(0!==s){const u=((e.x-n.x)*r.x+(e.y-n.y)*r.y)/s;if(u<0)i=Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2)<=o;else if(u>1)i=Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)<=o;else{const t=((n.y-e.y)*r.x-(n.x-e.x)*r.y)/s;i=Math.abs(t)*Math.sqrt(s)<=o}}return i}function B(n,t,e,o=1.2){return e.some((e=>U(n,t,e,o)))}function C(n,t,e,o=1.2){return e.every((e=>U(n,t,e,o)))}function R(n,t){let e=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const r=t[o],s=t[i];r.y>n.y!=s.y>n.y&&n.x<(s.x-r.x)*(n.y-r.y)/(s.y-r.y)+r.x&&(e=!e)}return e}function F(n,t){return n.some((n=>R(n,t)))}function N(n,t){return n.every((n=>R(n,t)))}function _(n,e,o,i,r=.1){const s=y(D(f(e,n)),D(f(i,o)));return Math.abs(s)<=Math.sin(t*r)}function j(n,t,e,o){const i=w(n,t,e,o);if(i)return A(i,n,t)}function k(n,t,e,o){const i=w(n,t,e,o);if(z(i))return A(i,n,t)}function O(n,t,e,o){return!0===z(w(n,t,e,o))}function w(n,t,e,o){let i=null;if(n&&t&&e&&o){const r=f(n,t),s=f(o,e),u=y(r,s);if(0!==u){const n=f(o,t);i={Ua:y(n,s)/u,Ub:y(r,n)/u}}}return i}function z(n){return n&&n.Ua>=0&&n.Ua<=1&&n.Ub>=0&&n.Ub<=1}function A(n,t,e){return{x:t.x*n.Ua+e.x*(1-n.Ua),y:t.y*n.Ua+e.y*(1-n.Ua)}}function H(n,t=!1,e=.1){let o=[];return n.forEach(((t,i)=>{o.some((o=>o.some(((r,s)=>Q(t,n[r],e,(n=>{o.splice(s+(n?0:1),0,i)}))))))||o.push([i])})),o.length>1&&(o=function(n,t,e){const o=n.filter(((o,i)=>{let r=!1;const s=G(t,o);for(let u=i+1;u<n.length;u++){const i=n[u],a=G(t,i);if(r=Q(s.first,a.last,e,(()=>i.push(...o)))||Q(s.last,a.first,e,(()=>i.unshift(...o)))||Q(s.last,a.last,e,(()=>i.push(...o.reverse())))||Q(s.first,a.first,e,(()=>i.unshift(...o.reverse()))),r)break}return!r}));return o}(o,n,e)),o.map((o=>{t&&o.forEach(((t,e)=>{const i=e<o.length-1?o[e+1]:o[0],[r,s]=n[i],[u]=n[t];M(s,r,u)&&(n[i][0]=s,n[i][1]=r)}));const{first:i,last:r}=G(n,o),s=o.length>2&&Q(i,r,e);return{inds:o,closed:s}}))}function Q(n,t,e,o=(n=>{})){let i=!0;const[r,s]=n;return P(r,t,e)?o(!0):P(s,t,e)?o(!1):i=!1,i}function G(n,t){return{first:n[t[0]],last:n[t[t.length-1]]}}var J={HALF_PI:t,QUART_PI:e,DOUBLE_PI:o,angleDegToRad:s,angleRadToDeg:u,roundFloat:a,lerp:c,dotProduct2D:l,crossProduct2D:y,delta2D:f,midPoint2D:g,normalize2D:D,normal2D:h,angleClockwise2D:x,isEqualCoords2D:d,isSomeEqualCoords2D:P,isEqualLinesSegments2D:m,dist2D:L,distManhattan2D:S,isNearerFirstPt2D:M,areaTriangle2D:b,areaPolygon2D:p,centroidPolygon2D:I,pointOnLineByLen2D:E,projectPointToStraightLine2D:q,sidePointRelativeStraightLine2D:v,isPointBelongStraightLine2D:T,isPointBelongLineSegment2D:U,isSomePointBelongLineSegment2D:B,isEveryPointBelongLineSegment2D:C,isPointInsidePolygon2D:R,isSomePointInsidePolygon2D:F,isEveryPointInsidePolygon2D:N,isParallelStraightLines2D:_,crossStraightLines2D:j,crossLinesSegments2D:k,isCrossLinesSegments2D:O,chainsLinesSegments2D:H};n.angleClockwise2D=x,n.angleDegToRad=s,n.angleRadToDeg=u,n.areaPolygon2D=p,n.areaTriangle2D=b,n.centroidPolygon2D=I,n.chainsLinesSegments2D=H,n.crossLinesSegments2D=k,n.crossProduct2D=y,n.crossStraightLines2D=j,n.default=J,n.delta2D=f,n.dist2D=L,n.distManhattan2D=S,n.dotProduct2D=l,n.isCrossLinesSegments2D=O,n.isEqualCoords2D=d,n.isEqualLinesSegments2D=m,n.isEveryPointBelongLineSegment2D=C,n.isEveryPointInsidePolygon2D=N,n.isNearerFirstPt2D=M,n.isParallelStraightLines2D=_,n.isPointBelongLineSegment2D=U,n.isPointBelongStraightLine2D=T,n.isPointInsidePolygon2D=R,n.isSomeEqualCoords2D=P,n.isSomePointBelongLineSegment2D=B,n.isSomePointInsidePolygon2D=F,n.lerp=c,n.midPoint2D=g,n.normal2D=h,n.normalize2D=D,n.pointOnLineByLen2D=E,n.projectPointToStraightLine2D=q,n.roundFloat=a,n.sidePointRelativeStraightLine2D=v,Object.defineProperty(n,"__esModule",{value:!0})}));
