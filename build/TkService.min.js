/* @hrimthurs/tackle 1.31.3 https://github.com/hrimthurs/Tackle @license MIT */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TkService={})}(this,(function(e){"use strict";function t(e,t=2){return a(e/1024,t)}function n(e,t=2){return a(e/1048576,t)}function r(e){return new Blob([e],{type:"application/octet-stream"})}function o(e){return btoa(new Uint8Array(e).reduce(((e,t)=>e+String.fromCharCode(t)),""))}function a(e,t,n=!1){let r=y(e,{number:e=>Number(e.toFixed(t))});return n?r:JSON.parse(r)}function i(e=1,t=null){const n=2147483647,r=1e5,o=t?.min?t.min-1:0,a=(t?.max??r)-o+1;let i=e%n;return function(e=null){if(i=48271*i%n,e){const t=e.min?e.min-1:0,n=(e.max??r)-t+1;return Math.trunc(i%n+t)}{const e=i%a+o;return t?Math.trunc(e):e/r}}}function u(e=null,t={}){const n={keysLowerCase:!1,valsLowerCase:!1,...t};let r={},o=e instanceof URL?e:g(e);if(o)for(const e of o.searchParams.keys()){let t=o.searchParams.get(e).replace(/^["'](.*)["']$/,"$1"),a=d(n.valsLowerCase?t.toLowerCase():t),i=a.reduce(((e,t)=>{if("string"==typeof t){let n=t.split(":"),[r,...o]=n,a=o.length>1?o.join(":"):o[0];void 0!==a&&(e[r]=b(a))}return e}),{}),u=Object.keys(i).length!=a.length?a.length>1?a:a[0]:i;r[n.keysLowerCase?e.toLowerCase():e]=u}return r}function f(e,t={},n=!1){let r="string"==typeof e?g(e):e;if(r)for(const e in t){let o=t[e];if(void 0!==o){if("object"==typeof o&&null!==o){let e=Array.isArray(o)?o.map((e=>y(e,{string:e=>e}))):Object.entries(o).map((e=>`${e[0]}:${y(e[1],{string:e=>e})}`));o=e.length>0?e.join(","):y(o)}r.searchParams.set(e,n?encodeURIComponent(o):o)}}return r}function s(e=""){const t=10+Math.trunc(10*Math.random()),n=new Array(t).fill(0).map((()=>Math.random())).join();return function(e,t=0){const n={f1:3735928559,f2:2654435761,f3:2246822507},r={f1:1103547991,f2:1597334677,f3:3266489909};let o=n.f1^t,a=r.f1^t;for(let t=0;t<e.length;t++){let i=e.charCodeAt(t);o=Math.imul(o^i,n.f2),a=Math.imul(a^i,r.f2)}o=Math.imul(o^o>>>16,n.f3)^Math.imul(a^a>>>13,r.f3),a=Math.imul(a^a>>>16,n.f3)^Math.imul(o^o>>>13,r.f3);let i=(a>>>0).toString(16)+(o>>>0).toString(16);return"0".repeat(16-i.length)+i}(e+Date.now()+n,Math.random())}function c(e,t){return e>1784e9&&1e5*t||1e8}function l(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(p[255&e]+p[e>>8&255]+p[e>>16&255]+p[e>>24&255]+"-"+p[255&t]+p[t>>8&255]+"-"+p[t>>16&15|64]+p[t>>24&255]+"-"+p[63&n|128]+p[n>>8&255]+"-"+p[n>>16&255]+p[n>>24&255]+p[255&r]+p[r>>8&255]+p[r>>16&255]+p[r>>24&255]).toLowerCase()}function m(e,t={}){return new Promise((async(n,r)=>{const o=setTimeout((()=>{t.timeoutReject?r(new Error("timeout")):n()}),e);if(t?.cbCreate(n,o),t.func)try{n(await t.func(...t.args??[]))}catch(e){r(e)}finally{clearTimeout(o)}}))}var h={bytesToKb:t,bytesToMb:n,arrayBufferToBlob:r,arrayBufferToString:o,trimFloat:a,randomLCG:i,getParamsURL:u,setParamsURL:f,generateHashUID:s,generateUID:c,generateUUID:l,promiseTimeout:m};const p=new Array(256).fill(0).map(((e,t)=>(t<16?"0":"")+t.toString(16)));function d(e){let t=[],n=[],r=0,o=0,a=e.split(",");for(const e of a)if(r>0||"{"==e[0]){n.push(e);let a=e.split("");r=a.reduce(((e,t)=>"{"==t?++e:"}"==t?--e:e),r),o=a.reduce(((e,t)=>['"',"'"].includes(t)?++e:e),o),0==r&&"}"==e[e.length-1]&&(t.push(n.join(",")),n=[])}else t.push(e);return 0==r&&o%2==0?t.concat(n).map((e=>""===e||b(e))):[e]}function y(e,t={},n=!0){let r=t[typeof e];return r?r(e):n?JSON.stringify(e,((e,n)=>y(n,t,!1))):e}function g(e){try{return new URL(decodeURIComponent(e||self.location.href))}catch{}}function b(e){try{return JSON.parse(e.replace(/^["'](.*)["']$/,"$1"))}catch{return e}}e.arrayBufferToBlob=r,e.arrayBufferToString=o,e.bytesToKb=t,e.bytesToMb=n,e.default=h,e.generateHashUID=s,e.generateUID=c,e.generateUUID=l,e.getParamsURL=u,e.promiseTimeout=m,e.randomLCG=i,e.setParamsURL=f,e.trimFloat=a,Object.defineProperty(e,"__esModule",{value:!0})}));
