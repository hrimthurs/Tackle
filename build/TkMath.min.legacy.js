/* @hrimthurs/tackle 1.31.2 https://github.com/hrimthurs/Tackle @license MIT */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).TkMath={})}(this,(function(n){"use strict";function t(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,i,o,a,u=[],s=!0,l=!1;try{if(o=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;s=!1}else for(;!(s=(r=o.call(e)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(n){l=!0,i=n}finally{try{if(!s&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(n,t)||r(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(n){return function(n){if(Array.isArray(n))return i(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||r(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(n,t){if(n){if("string"==typeof n)return i(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(n,t):void 0}}function i(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var o=Math.PI/2,a=Math.PI/4,u=2*Math.PI,s=Math.PI/180,l=180/Math.PI;function f(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Number(n)*s}function c(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Number(n)*l}function y(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return Number(n.toFixed(t))}function h(n,t){return n.x*t.x+n.y*t.y}function g(n,t){return n.x*t.y-n.y*t.x}function d(n,t){return{x:n.x-t.x,y:n.y-t.y}}function v(n,t){return{x:(n.x+t.x)/2,y:(n.y+t.y)/2}}function D(n){var t=n.x,e=n.y,r=1/(Math.sqrt(t*t+e*e)||1);return{x:t*r,y:e*r}}function x(n,t){return D({x:n.y-t.y,y:t.x-n.x})}function m(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=D(d(n,t)),o=D(d(e,t)),a=Math.acos(h(i,o));return g(i,o)<0&&(a*=-1),!r&&a<0&&(a+=u),a}function p(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=d(t,n);return Math.abs(r.x)<e&&Math.abs(r.y)<e}function P(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;return t.some((function(t){return p(n,t,e)}))}function b(n,t,e,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=p(n,e,i)&&p(t,r,i)||p(t,e,i)&&p(n,r,i);return o}function M(n,t){var e=d(t,n);return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function S(n,t){var e=d(t,n);return Math.abs(e.x)+Math.abs(e.y)}function L(n,t,e){return S(e,n)<S(e,t)}function I(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=((t.x-n.x)*(e.y-n.y)-(e.x-n.x)*(t.y-n.y))/2;return r?i:Math.abs(i)}function w(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=0;if(n.length>3){var r=n.reduce((function(t,e,r){return t+g(e,n[(r+1)%n.length])}),0)/2;e=t?r:Math.abs(r)}else 3===n.length&&(e=I(n[0],n[1],n[2],t));return e}function E(n){var t=0,e=n.reduce((function(e,r,i){var o=n[(i+1)%n.length],a=g(r,o);return t+=a,{x:e.x+(r.x+o.x)*a,y:e.y+(r.y+o.y)*a}}),{x:0,y:0}),r=3*t;return{x:e.x/r,y:e.y/r}}function T(n,t,e){var r=d(t,n),i=e/(M(n,t)||1);return{x:n.x+r.x*i,y:n.y+r.y*i}}function U(n,t,e){var r=d(t,n),i=h(d(e,n),r)/h(r,r);return{x:n.x+r.x*i,y:n.y+r.y*i}}function q(n,t,e){var r=g(d(t,n),d(e,n));return Math.sign(r)}function A(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.2,i=d(t,n),o=d(e,n),a=g(i,o),u=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2));return Math.abs(a/u)<=r/2}function B(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.2,i=!1,o=d(t,n),a=Math.pow(o.x,2)+Math.pow(o.y,2);if(0!==a){var u=((e.x-n.x)*o.x+(e.y-n.y)*o.y)/a;if(u<0)i=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))<=r;else if(u>1)i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))<=r;else{var s=((n.y-e.y)*o.x-(n.x-e.x)*o.y)/a;i=Math.abs(s)*Math.sqrt(a)<=r}}return i}function j(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.2;return e.some((function(e){return B(n,t,e,r)}))}function C(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.2;return e.every((function(e){return B(n,t,e,r)}))}function O(n,t){for(var e=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>n.y!=a.y>n.y&&n.x<(a.x-o.x)*(n.y-o.y)/(a.y-o.y)+o.x&&(e=!e)}return e}function R(n,t){return n.some((function(n){return O(n,t)}))}function k(n,t){return n.every((function(n){return O(n,t)}))}function F(n,t,e,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,a=D(d(t,n)),u=D(d(r,e)),s=g(a,u);return Math.abs(s)<=Math.sin(o*i)}function N(n,t,e,r){var i=H(n,t,e,r);if(i)return $(i,n,t)}function _(n,t,e,r){var i=H(n,t,e,r);if(Q(i))return $(i,n,t)}function z(n,t,e,r){return!0===Q(H(n,t,e,r))}function H(n,t,e,r){var i=null;if(n&&t&&e&&r){var o=d(n,t),a=d(r,e),u=g(o,a);if(0!==u){var s=d(r,t);i={Ua:g(s,a)/u,Ub:g(o,s)/u}}}return i}function Q(n){return n&&n.Ua>=0&&n.Ua<=1&&n.Ub>=0&&n.Ub<=1}function $(n,t,e){return{x:t.x*n.Ua+e.x*(1-n.Ua),y:t.y*n.Ua+e.y*(1-n.Ua)}}function G(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=[];return n.forEach((function(t,e){i.some((function(i){return i.some((function(o,a){return K(t,n[o],r,(function(n){i.splice(a+(n?0:1),0,e)}))}))}))||i.push([e])})),i.length>1&&(i=J(i,n,r)),i.map((function(i){e&&i.forEach((function(e,r){var o=r<i.length-1?i[r+1]:i[0],a=t(n[o],2),u=a[0],s=a[1];L(s,u,t(n[e],1)[0])&&(n[o][0]=s,n[o][1]=u)}));var o=V(n,i),a=o.first,u=o.last,s=i.length>2&&K(a,u,r);return{inds:i,closed:s}}))}function J(n,t,r){return n.filter((function(i,o){for(var a=!1,u=V(t,i),s=function(o){var s=n[o],l=V(t,s);if(a=K(u.first,l.last,r,(function(){return s.push.apply(s,e(i))}))||K(u.last,l.first,r,(function(){return s.unshift.apply(s,e(i))}))||K(u.last,l.last,r,(function(){return s.push.apply(s,e(i.reverse()))}))||K(u.first,l.first,r,(function(){return s.unshift.apply(s,e(i.reverse()))})))return"break"},l=o+1;l<n.length;l++){if("break"===s(l))break}return!a}))}function K(n,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(n){},o=!0,a=t(n,2),u=a[0],s=a[1];return P(u,e,r)?i(!0):P(s,e,r)?i(!1):o=!1,o}function V(n,t){return{first:n[t[0]],last:n[t[t.length-1]]}}var W={HALF_PI:o,QUART_PI:a,DOUBLE_PI:u,angleDegToRad:f,angleRadToDeg:c,roundFloat:y,dotProduct2D:h,crossProduct2D:g,delta2D:d,midPoint2D:v,normalize2D:D,normal2D:x,angleClockwise2D:m,isEqualCoords2D:p,isSomeEqualCoords2D:P,isEqualLinesSegments2D:b,dist2D:M,distManhattan2D:S,isNearerFirstPt2D:L,areaTriangle2D:I,areaPolygon2D:w,centroidPolygon2D:E,pointOnLineByLen2D:T,projectPointToStraightLine2D:U,sidePointRelativeStraightLine2D:q,isPointBelongStraightLine2D:A,isPointBelongLineSegment2D:B,isSomePointBelongLineSegment2D:j,isEveryPointBelongLineSegment2D:C,isPointInsidePolygon2D:O,isSomePointInsidePolygon2D:R,isEveryPointInsidePolygon2D:k,isParallelStraightLines2D:F,crossStraightLines2D:N,crossLinesSegments2D:_,isCrossLinesSegments2D:z,chainsLinesSegments2D:G};n.angleClockwise2D=m,n.angleDegToRad=f,n.angleRadToDeg=c,n.areaPolygon2D=w,n.areaTriangle2D=I,n.centroidPolygon2D=E,n.chainsLinesSegments2D=G,n.crossLinesSegments2D=_,n.crossProduct2D=g,n.crossStraightLines2D=N,n.default=W,n.delta2D=d,n.dist2D=M,n.distManhattan2D=S,n.dotProduct2D=h,n.isCrossLinesSegments2D=z,n.isEqualCoords2D=p,n.isEqualLinesSegments2D=b,n.isEveryPointBelongLineSegment2D=C,n.isEveryPointInsidePolygon2D=k,n.isNearerFirstPt2D=L,n.isParallelStraightLines2D=F,n.isPointBelongLineSegment2D=B,n.isPointBelongStraightLine2D=A,n.isPointInsidePolygon2D=O,n.isSomeEqualCoords2D=P,n.isSomePointBelongLineSegment2D=j,n.isSomePointInsidePolygon2D=R,n.midPoint2D=v,n.normal2D=x,n.normalize2D=D,n.pointOnLineByLen2D=T,n.projectPointToStraightLine2D=U,n.roundFloat=y,n.sidePointRelativeStraightLine2D=q,Object.defineProperty(n,"__esModule",{value:!0})}));
