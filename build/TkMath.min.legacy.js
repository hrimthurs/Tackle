/* @hrimthurs/tackle 1.31.4 https://github.com/hrimthurs/Tackle @license MIT */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).TkMath={})}(this,(function(n){"use strict";function t(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,i,o,a,u=[],s=!0,l=!1;try{if(o=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;s=!1}else for(;!(s=(r=o.call(e)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(n){l=!0,i=n}finally{try{if(!s&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(n,t)||r(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(n){return function(n){if(Array.isArray(n))return i(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||r(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(n,t){if(n){if("string"==typeof n)return i(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(n,t):void 0}}function i(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var o=Math.PI/2,a=Math.PI/4,u=2*Math.PI,s=Math.PI/180,l=180/Math.PI;function f(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Number(n)*s}function c(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Number(n)*l}function y(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return Number(n.toFixed(t))}function h(n,t,e){return n*(1-e)+t*e}function g(n,t){return n.x*t.x+n.y*t.y}function d(n,t){return n.x*t.y-n.y*t.x}function v(n,t){return{x:n.x-t.x,y:n.y-t.y}}function D(n,t){return{x:(n.x+t.x)/2,y:(n.y+t.y)/2}}function x(n){var t=n.x,e=n.y,r=1/(Math.sqrt(t*t+e*e)||1);return{x:t*r,y:e*r}}function m(n,t){return x({x:n.y-t.y,y:t.x-n.x})}function p(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=x(v(n,t)),o=x(v(e,t)),a=Math.acos(g(i,o));return d(i,o)<0&&(a*=-1),!r&&a<0&&(a+=u),a}function P(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=v(t,n);return Math.abs(r.x)<e&&Math.abs(r.y)<e}function b(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;return t.some((function(t){return P(n,t,e)}))}function M(n,t,e,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=P(n,e,i)&&P(t,r,i)||P(t,e,i)&&P(n,r,i);return o}function S(n,t){var e=v(t,n);return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function L(n,t){var e=v(t,n);return Math.abs(e.x)+Math.abs(e.y)}function I(n,t,e){return L(e,n)<L(e,t)}function w(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=((t.x-n.x)*(e.y-n.y)-(e.x-n.x)*(t.y-n.y))/2;return r?i:Math.abs(i)}function E(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=0;if(n.length>3){var r=n.reduce((function(t,e,r){return t+d(e,n[(r+1)%n.length])}),0)/2;e=t?r:Math.abs(r)}else 3===n.length&&(e=w(n[0],n[1],n[2],t));return e}function T(n){var t=0,e=n.reduce((function(e,r,i){var o=n[(i+1)%n.length],a=d(r,o);return t+=a,{x:e.x+(r.x+o.x)*a,y:e.y+(r.y+o.y)*a}}),{x:0,y:0}),r=3*t;return{x:e.x/r,y:e.y/r}}function U(n,t,e){var r=v(t,n),i=e/(S(n,t)||1);return{x:n.x+r.x*i,y:n.y+r.y*i}}function q(n,t,e){var r=v(t,n),i=g(v(e,n),r)/g(r,r);return{x:n.x+r.x*i,y:n.y+r.y*i}}function A(n,t,e){var r=d(v(t,n),v(e,n));return Math.sign(r)}function B(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.2,i=v(t,n),o=v(e,n),a=d(i,o),u=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2));return Math.abs(a/u)<=r/2}function j(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.2,i=!1,o=v(t,n),a=Math.pow(o.x,2)+Math.pow(o.y,2);if(0!==a){var u=((e.x-n.x)*o.x+(e.y-n.y)*o.y)/a;if(u<0)i=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))<=r;else if(u>1)i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))<=r;else{var s=((n.y-e.y)*o.x-(n.x-e.x)*o.y)/a;i=Math.abs(s)*Math.sqrt(a)<=r}}return i}function C(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.2;return e.some((function(e){return j(n,t,e,r)}))}function O(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.2;return e.every((function(e){return j(n,t,e,r)}))}function R(n,t){for(var e=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>n.y!=a.y>n.y&&n.x<(a.x-o.x)*(n.y-o.y)/(a.y-o.y)+o.x&&(e=!e)}return e}function k(n,t){return n.some((function(n){return R(n,t)}))}function F(n,t){return n.every((function(n){return R(n,t)}))}function N(n,t,e,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,a=x(v(t,n)),u=x(v(r,e)),s=d(a,u);return Math.abs(s)<=Math.sin(o*i)}function _(n,t,e,r){var i=Q(n,t,e,r);if(i)return G(i,n,t)}function z(n,t,e,r){var i=Q(n,t,e,r);if($(i))return G(i,n,t)}function H(n,t,e,r){return!0===$(Q(n,t,e,r))}function Q(n,t,e,r){var i=null;if(n&&t&&e&&r){var o=v(n,t),a=v(r,e),u=d(o,a);if(0!==u){var s=v(r,t);i={Ua:d(s,a)/u,Ub:d(o,s)/u}}}return i}function $(n){return n&&n.Ua>=0&&n.Ua<=1&&n.Ub>=0&&n.Ub<=1}function G(n,t,e){return{x:t.x*n.Ua+e.x*(1-n.Ua),y:t.y*n.Ua+e.y*(1-n.Ua)}}function J(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=[];return n.forEach((function(t,e){i.some((function(i){return i.some((function(o,a){return V(t,n[o],r,(function(n){i.splice(a+(n?0:1),0,e)}))}))}))||i.push([e])})),i.length>1&&(i=K(i,n,r)),i.map((function(i){e&&i.forEach((function(e,r){var o=r<i.length-1?i[r+1]:i[0],a=t(n[o],2),u=a[0],s=a[1];I(s,u,t(n[e],1)[0])&&(n[o][0]=s,n[o][1]=u)}));var o=W(n,i),a=o.first,u=o.last,s=i.length>2&&V(a,u,r);return{inds:i,closed:s}}))}function K(n,t,r){return n.filter((function(i,o){for(var a=!1,u=W(t,i),s=function(o){var s=n[o],l=W(t,s);if(a=V(u.first,l.last,r,(function(){return s.push.apply(s,e(i))}))||V(u.last,l.first,r,(function(){return s.unshift.apply(s,e(i))}))||V(u.last,l.last,r,(function(){return s.push.apply(s,e(i.reverse()))}))||V(u.first,l.first,r,(function(){return s.unshift.apply(s,e(i.reverse()))})))return"break"},l=o+1;l<n.length;l++){if("break"===s(l))break}return!a}))}function V(n,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(n){},o=!0,a=t(n,2),u=a[0],s=a[1];return b(u,e,r)?i(!0):b(s,e,r)?i(!1):o=!1,o}function W(n,t){return{first:n[t[0]],last:n[t[t.length-1]]}}var X={HALF_PI:o,QUART_PI:a,DOUBLE_PI:u,angleDegToRad:f,angleRadToDeg:c,roundFloat:y,lerp:h,dotProduct2D:g,crossProduct2D:d,delta2D:v,midPoint2D:D,normalize2D:x,normal2D:m,angleClockwise2D:p,isEqualCoords2D:P,isSomeEqualCoords2D:b,isEqualLinesSegments2D:M,dist2D:S,distManhattan2D:L,isNearerFirstPt2D:I,areaTriangle2D:w,areaPolygon2D:E,centroidPolygon2D:T,pointOnLineByLen2D:U,projectPointToStraightLine2D:q,sidePointRelativeStraightLine2D:A,isPointBelongStraightLine2D:B,isPointBelongLineSegment2D:j,isSomePointBelongLineSegment2D:C,isEveryPointBelongLineSegment2D:O,isPointInsidePolygon2D:R,isSomePointInsidePolygon2D:k,isEveryPointInsidePolygon2D:F,isParallelStraightLines2D:N,crossStraightLines2D:_,crossLinesSegments2D:z,isCrossLinesSegments2D:H,chainsLinesSegments2D:J};n.angleClockwise2D=p,n.angleDegToRad=f,n.angleRadToDeg=c,n.areaPolygon2D=E,n.areaTriangle2D=w,n.centroidPolygon2D=T,n.chainsLinesSegments2D=J,n.crossLinesSegments2D=z,n.crossProduct2D=d,n.crossStraightLines2D=_,n.default=X,n.delta2D=v,n.dist2D=S,n.distManhattan2D=L,n.dotProduct2D=g,n.isCrossLinesSegments2D=H,n.isEqualCoords2D=P,n.isEqualLinesSegments2D=M,n.isEveryPointBelongLineSegment2D=O,n.isEveryPointInsidePolygon2D=F,n.isNearerFirstPt2D=I,n.isParallelStraightLines2D=N,n.isPointBelongLineSegment2D=j,n.isPointBelongStraightLine2D=B,n.isPointInsidePolygon2D=R,n.isSomeEqualCoords2D=b,n.isSomePointBelongLineSegment2D=C,n.isSomePointInsidePolygon2D=k,n.lerp=h,n.midPoint2D=D,n.normal2D=m,n.normalize2D=x,n.pointOnLineByLen2D=U,n.projectPointToStraightLine2D=q,n.roundFloat=y,n.sidePointRelativeStraightLine2D=A,Object.defineProperty(n,"__esModule",{value:!0})}));
